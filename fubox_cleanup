#!/bin/sh
#
# Copyright (c) 2022 Alexander Möller <alexander.moeller@fu-berlin.de>
#
# Permission to use, copy, modify, and distribute this software for any
# purpose with or without fee is hereby granted, provided that the above
# copyright notice and this permission notice appear in all copies.
#
# THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
# WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
# MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
# ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
# WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
# ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
# OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

AGKOCHDIR=${AGKOCHDIR:-${HOME}/Cloud/fubox/AG\ Koch/}
FUBOXDIR=${FUBOXDIR:-${HOME}/Cloud/fubox/}

find_weird() {
	printf "\n===> Files & directories containing weird characters:\n"
	find "${AGKOCHDIR}" \
		-iname '* *' \
		-o -iname '*ö*' \
		-o -iname '*ä*' \
		-o -iname '*ü*' \
		-o -iname '*\(*' \
		-o -iname '*\)*' \
		-o -iname '*\[*' \
		-o -iname '*\]*' \
		-o -iname '*\{*' \
		-o -iname '*\}*' \
		-o -iname '*\&*' \
		-o -iname '*ß*' \
		| awk -v rootdir="${FUBOXDIR}/" '{ gsub(rootdir, "", $0); print $0 }'

	printf "\n===> Readme.md files and their contents\n"
	IFS='
	'
	_readmefiles=$(find "${AGKOCHDIR}" -name 'Readme.md')
	for f in ${_readmefiles}
	do
		printf "\n\033[31m---> %s\033[0m" "$f"
		printf "\n---> %s\n" "$(cat $f)"
	done
}

find_weird
